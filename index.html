<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		
		<title>LexTran Stop Locations</title>
		
		<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
		<link rel="stylesheet" href="css/basic.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
		<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
		<script src="http://maps.stamen.com/js/tile.stamen.js"></script>
	
	</head>
	<body>
		<div id='map'></div>

		<div class="panel group">
			<div class="panel panel-primary panel-fixed">
			  <div class="panel-heading">
			    <h3 class="panel-title"><span class="title">LexTran Bus Stops</span>  <a data-toggle="collapse" href="#collapse1"><span class="glyphicon glyphicon-chevron-down"></span></a>
			    </h3>
			  </div>
			 <div id="collapse1" class="panel-collapse collapse">
			 	 <div class="panel-body">
			 	 	<span class="description">
			 	 		SPATIAL INEQUITY OF SHELTER: A PROPORTIONAL COMPARISON OF STOP TYPE<br>
			 	 		Three different types of stops were identified along the routes within the study area: <br>
			 	 		Pole: sign indicating a bus stop, usually on post or light pole<br>
						Bench: a bus stop with a bench<br>
						Shelter: a bus stop with a covered enclosure<br>
						<br>
 						Overall, the site area has 154 stops and only 14 shelters distributed along those routes. In contrast, the Red Mile route has a total of 26 stops, seven of which have shelters. Collectively, the site area has 43 miles of bus routes with 14 shelters, which means there are approximately 0.33 shelters per mile. However, the Red Mile route is approximately 5 miles long and with the seven shelters, equals to 1.4 shelters per mile.

					</span>
				 </div>
			</div> 
		</div>

		<div class="panel group"></div>
			<div class="panel panel-primary panel-legend">
				<div class="panel-heading">
			 	 	<h3 class="panel-title"><span class="title">Types of Stops</span></h3>
		 	 	</div>
		 	 	<div class="panel-body">
						<img src="img/circle.png"><b>Pole</b>
						<br /><img src="img/square.png"><b>Bench</b>
						<br /><img src="img/star.png"><b>Shelter</b>
				</div>
			</div>
		</div>

<script>

	var baseLayer = new L.StamenTileLayer("toner-lite");
	
	var starIcon = L.icon({
            iconUrl: 'img/star.png',
            iconSize: [18, 18],
            iconAnchor: [18, 18],
            popupAnchor: [-9, -17]
        });
    var squareIcon = L.icon({
	        iconUrl: 'img/square.png',
	        iconSize: [18, 18],
            iconAnchor: [18, 18],
            popupAnchor: [-9, -17]
    	});
    var circleIcon = L.icon({
            iconUrl: 'img/circle.png',
            iconSize: [18, 18],
            iconAnchor: [18, 18],
            popupAnchor: [-9, -17]
    	});

 var pointLayer = null;
 
$.getJSON("data/LexTranStops.geojson",function(data){
    pointLayer = L.geoJson(data,{
        onEachFeature: function (feature, layer) {
        	var props = layer.feature.properties;
            layer.bindPopup("<b>" + props.Name + "</b>" + "<br>" + "Route " + props.Route_Num + ", " + props.Route_Name);
	      }, pointToLayer: function (feature, latlng) {
            if (feature.properties.Type == "Shelter"){
                var marker = L.marker(latlng,{icon: starIcon});
            } else if (feature.properties.Type == "Pole"){
                var  marker = L.marker(latlng,{icon: circleIcon});
            } else {
                var marker = L.marker(latlng,{icon: squareIcon})
            };
        return marker;
        }
    });
    
    var map = L.map('map', {maxZoom: 17}).fitBounds(pointLayer.getBounds());
	baseLayer.addTo(map);
	pointLayer.addTo(map);
	
});

// var data;
	
	// $.ajax({
	// 	dataType: "json",
	// 	url: queryId+".geojson",
	// 	success: function(ajaxData) {
	// 		console.log(ajaxData);
	// 		 data = ajaxData;
		    
    		
 //   		$('#collapse1').on('hidden.bs.collapse', function () {
	// 		  $('.panel-title a .glyphicon').removeClass('glyphicon-chevron-up');
	// 		  $('.panel-title a .glyphicon').addClass('glyphicon-chevron-down');
	// 		})
			
	// 		$('#collapse1').on('shown.bs.collapse', function () {
	// 		  $('.panel-title a .glyphicon').removeClass('glyphicon-chevron-down');
	// 		  $('.panel-title a .glyphicon').addClass('glyphicon-chevron-up');
	// 		})
			
		
	// }).error(function() {});

	
	
</script>

	</body>
</html>