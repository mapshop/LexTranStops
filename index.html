<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<!-- add a title for the overall map page here -->
	<title>LexTran Stop Locations</title>

	<!-- Leaflet stylesheet -->
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

	<!-- JQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>

	<!-- Latest compiled and minified Bootstrap -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

	<!-- Leaflet.js -->
	<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>

	<!-- Stamen Tiles -->
	<script src="http://maps.stamen.com/js/tile.stamen.js"></script>

	<style>
	html, body, #mapDiv {
		height: 100%;
		width: 100%;
	}
	.leaflet-popup-content-wrapper {
		opacity: 0.9;
		border-radius: 5px;
	}
    .panel-fixed {
  		position: absolute;
  		top: 15px;
	  	right: 15px;
		margin-left: 60px;
		width: 320px;
		text-align: center;
		z-index: 50;
	}
	</style>
</head>
<body>
		<div id='mapDiv'></div>

		<div class="panel group">
			<div class="panel panel-primary panel-fixed">
			  <div class="panel-heading">
			    <h3 class="panel-title"><span class="title">LexTran Bus Stops</span>  <a data-toggle="collapse" href="#collapse1"><span class="glyphicon glyphicon-chevron-down"></span></a>
			    </h3>
			  </div>
			 <div id="collapse1" class="panel-collapse collapse">
			 	 <div class="panel-body">
			 	 	<span class="description">Three different types of stops were identified along the routes within the study area: <br>
			 	 		Pole: sign indicating a bus stop, usually on post or light pole<br>
						Bench: a bus stop with a bench<br>
						Shelter: a bus stop with a covered enclosure</span>
				 </div>

			</div> 
			
				<!-- <div class="panel-footer">
				  		<a id="dataset-download-KML" href="" target="_new">Download KML</a> -
				  		<a id="dataset-download-zip" href="" target="_new">Download .zip</a>
				  		<a id="dataset-download-geoJSON" href="" target="_new">Download&nbsp;GeoJSON</a>
				</div> -->
		</div>


	<!-- add the javascript file here -->
	<script src = "lextranstops.js"></script>
		
<script>
	//Create map
	var map = new L.map('mapDiv', {
		//change the centering and zoom as needed
		center: [38.055,-84.483],
		zoom: 14,
		minZoom: 10,
		maxZoom: 17,
		zoomControl: true,
		dragging: true,
	});

	// Add tile layer
	var layer = new L.StamenTileLayer("toner-lite");

	map.addLayer(layer);
	
	//create some icons!
	var starIcon = L.icon({
            iconUrl: 'star.png',
            iconSize: [18, 18],
            iconAnchor: [18, 18],
            popupAnchor: [-9, -17]
        });
    var squareIcon = L.icon({
	        iconUrl: 'square.png',
	        iconSize: [15, 15],
	        iconAnchor: [15, 15],
	        popupAnchor: [-7, -14]
    	});
    var circleIcon = L.icon({
            iconUrl: 'circle.png',
            iconSize: [18, 18],
            iconAnchor: [18, 18],
            popupAnchor: [-9, -17]
    	});

	//"data" is the var name in the js script file
    var shelterLayer = L.geoJson(data, {
            pointToLayer: function (feature, latlng) {
                return L.marker(latlng, {
                    icon: starIcon
                });
            },
            filter: function (feature) {
                if (feature.properties.Type == 'Shelter') {
                    return feature;
                }
            },
            onEachFeature: function (feature, layer) {
                var props = layer.feature.properties;
            	layer.bindPopup("<b>" + props.Name + "</b>" + "<br>" + "Route " + props.Route_Num + ", " + props.Route_Name);
        	}
        }).addTo(map);

	var poleLayer = L.geoJson(data, {
            pointToLayer: function (feature, latlng) {
                return L.marker(latlng, {
                    icon: circleIcon
                });
            },
            filter: function (feature) {
                //          console.log(feature.properties.ImpYear);
                if (feature.properties.Type == 'Pole') {
                    return feature;
                }
            },
            onEachFeature: function (feature, layer) {
                //            layer.setStyle(
                //                style(feature)
                //            )
                var props = layer.feature.properties;
                //            console.log(layer.feature.properties.University);
             layer.bindPopup("<b>" + props.Name + "</b>" + "<br>" + "Route " + props.Route_Num + ", " + props.Route_Name);
        	}
        }).addTo(map);

       var benchLayer = L.geoJson(data, {
            pointToLayer: function (feature, latlng) {
                return L.marker(latlng, {
                    icon: squareIcon
                });
            },
            filter: function (feature) {
                //          console.log(feature.properties.ImpYear);
                if (feature.properties.Type == 'Bench') {
                    return feature;
                }
            },
            onEachFeature: function (feature, layer) {
                //            layer.setStyle(
                //                style(feature)
                //            )
                var props = layer.feature.properties;
                //            console.log(layer.feature.properties.University);
           layer.bindPopup("<b>" + props.Name + "</b>" + "<br>" + "Route " + props.Route_Num + ", " + props.Route_Name);
        	}
        }).addTo(map);     
</script>
<header>

	<!-- title that will show up on the screen -->
	<h1>Lextran Bus Stops</h1>
</header>
	</body>
</html>